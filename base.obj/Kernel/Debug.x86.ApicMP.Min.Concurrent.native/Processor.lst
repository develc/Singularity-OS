; Listing generated by Microsoft (R) Optimizing Compiler Version 14.00.50727.762 

	TITLE	C:\Users\cc\source\repos\Singularity-OS\base\Kernel\Native\ix86\Processor.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?m_GetProcessor@Struct_Microsoft_Singularity_ProcessorContext@@SIPAUClass_Microsoft_Singularity_Processor@@PAU1@@Z ; Struct_Microsoft_Singularity_ProcessorContext::m_GetProcessor
; Function compile flags: /Ogtp
; File c:\users\cc\source\repos\singularity-os\base\kernel\native\ix86\processor.cpp
;	COMDAT ?m_GetProcessor@Struct_Microsoft_Singularity_ProcessorContext@@SIPAUClass_Microsoft_Singularity_Processor@@PAU1@@Z
_TEXT	SEGMENT
?m_GetProcessor@Struct_Microsoft_Singularity_ProcessorContext@@SIPAUClass_Microsoft_Singularity_Processor@@PAU1@@Z PROC ; Struct_Microsoft_Singularity_ProcessorContext::m_GetProcessor, COMDAT
; _self$ = ecx

; 30   :     return (Class_Microsoft_Singularity_Processor *) self->_processor;

  00000	8b 81 a4 04 00
	00		 mov	 eax, DWORD PTR [ecx+1188]

; 31   : }

  00006	c3		 ret	 0
?m_GetProcessor@Struct_Microsoft_Singularity_ProcessorContext@@SIPAUClass_Microsoft_Singularity_Processor@@PAU1@@Z ENDP ; Struct_Microsoft_Singularity_ProcessorContext::m_GetProcessor
_TEXT	ENDS
PUBLIC	?m_UpdateAfterGC@Struct_Microsoft_Singularity_ProcessorContext@@SIXPAU1@PAUClass_Microsoft_Singularity_Processor@@@Z ; Struct_Microsoft_Singularity_ProcessorContext::m_UpdateAfterGC
; Function compile flags: /Ogtp
;	COMDAT ?m_UpdateAfterGC@Struct_Microsoft_Singularity_ProcessorContext@@SIXPAU1@PAUClass_Microsoft_Singularity_Processor@@@Z
_TEXT	SEGMENT
?m_UpdateAfterGC@Struct_Microsoft_Singularity_ProcessorContext@@SIXPAU1@PAUClass_Microsoft_Singularity_Processor@@@Z PROC ; Struct_Microsoft_Singularity_ProcessorContext::m_UpdateAfterGC, COMDAT
; _self$ = ecx
; _processor$ = edx

; 38   :     self->_processor = processor;

  00000	89 91 a4 04 00
	00		 mov	 DWORD PTR [ecx+1188], edx

; 39   : }

  00006	c3		 ret	 0
?m_UpdateAfterGC@Struct_Microsoft_Singularity_ProcessorContext@@SIXPAU1@PAUClass_Microsoft_Singularity_Processor@@@Z ENDP ; Struct_Microsoft_Singularity_ProcessorContext::m_UpdateAfterGC
_TEXT	ENDS
PUBLIC	?ProcessorInitialize@@YIXPAUClass_Microsoft_Singularity_Hal_Cpu@@@Z ; ProcessorInitialize
; Function compile flags: /Ogtp
;	COMDAT ?ProcessorInitialize@@YIXPAUClass_Microsoft_Singularity_Hal_Cpu@@@Z
_TEXT	SEGMENT
?ProcessorInitialize@@YIXPAUClass_Microsoft_Singularity_Hal_Cpu@@@Z PROC ; ProcessorInitialize, COMDAT
; _pCpu$ = ecx

; 53   :     // The ProcessorContext can be found at a published offset in FS.  The DS-based address of this
; 54   :     // context is available in the hal processor record
; 55   : 
; 56   :     Struct_Microsoft_Singularity_ProcessorContext *proc
; 57   :       = (Struct_Microsoft_Singularity_ProcessorContext *) pCpu->CpuRecordPage;
; 58   : 
; 59   :     proc->halCpu = pCpu;

  00000	8b 41 0c	 mov	 eax, DWORD PTR [ecx+12]
  00003	89 88 a0 04 00
	00		 mov	 DWORD PTR [eax+1184], ecx

; 60   : 
; 61   : #if PAGING
; 62   :     // XXX PBAR Set up MSRs for SYSENTER/SYSEXIT
; 63   :     Class_Microsoft_Singularity_Isal_Isa::g_WriteMsr(0x174, SEGMENT_SELECTOR(pc));
; 64   :     Class_Microsoft_Singularity_Isal_Isa::g_WriteMsr(0x175, proc->cpuRecord.interruptStackBegin + 0x2000);
; 65   :     Class_Microsoft_Singularity_Isal_Isa::g_WriteMsr(0x176, (UINT64)FakeSyscall);
; 66   : #endif
; 67   : }

  00009	c3		 ret	 0
?ProcessorInitialize@@YIXPAUClass_Microsoft_Singularity_Hal_Cpu@@@Z ENDP ; ProcessorInitialize
_TEXT	ENDS
END
